<!DOCTYPE html>
<html lang="ko">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WNPSJBSP22"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WNPSJBSP22');
</script>
  
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Innermyu | 심해의 마녀 뮤너</title>

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Noto+Serif+KR:wght@400;600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Noto Serif KR',serif;
  color:#e9e9e9;
  text-align:center;
  background:
    linear-gradient(
      to bottom,
      rgba(0,0,0,.65) 0%,
      rgba(0,0,0,.45) 30%,
      rgba(0,0,0,.45) 70%,
      rgba(0,0,0,.65) 100%
    ),
    url('assets/innermyu_2.gif') center/cover fixed no-repeat;
}

/* 타이틀 */
.logo{
  font-family:'Cinzel',serif;
  font-size:3em;
  margin-top:60px;
  color:#ffecd2;
  text-shadow:0 0 15px rgba(255,236,210,.4);
}
.subtitle{opacity:.8;margin-bottom:40px}

  
/* 메뉴 */
  a{
  text-decoration:none;
  color:inherit;
}
  
.menu-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:28px;
  max-width:900px;
  margin:0 auto 80px;
}

.menu-btn{
  background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.35);
  border-radius:18px;
  padding:20px 22px;
  min-height:110px;
  box-sizing:border-box;
  transition:.25s ease;
  backdrop-filter: blur(2px);
}


.menu-btn:hover{
  transform:translateY(-4px);
  box-shadow:0 8px 20px rgba(0,0,0,.35);
}


.menu-btn.music{
  background:rgba(255,255,255,.05);
  border:1.5px solid #f1d46a;
  box-shadow:0 0 12px rgba(241,212,106,.35);
}

.menu-btn.dm{
  background:linear-gradient(
    135deg,
    #e9d58a 0%,
    #d1b24b 45%,
    #9f7f1f 100%
  );
  color:#1a1200;
  border:none;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.5),
    inset 0 -1px 0 rgba(0,0,0,.25),
    0 6px 16px rgba(180,140,40,.35);
}



.menu-title{
  font-size:1.08em;
  font-weight:600;
  margin-bottom:6px;
  margin-top:6px;
}

.menu-desc{
  font-size:0.8em;
  opacity:0.75;
  line-height:1.4;
}


/* 카드 스프레드 */
#deck-screen,#result-screen{display:none;
                            padding:60px 20px;
                              overflow-y: auto;
                           }
.card-grid{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:16px;
}
.card{
  width:110px;
  height:170px;
  background:#1a1a2e;
  border:2px solid #533483;
  border-radius:14px;
  cursor:pointer;
  transition:.3s;
}
.card:hover{
  transform:translateY(-10px);
  border-color:#ffecd2;
}

/* 결과 */
.result-box{
  max-width:720px;
  margin:auto;
  background:rgba(0,0,0,.22);
  padding:40px;
  border-radius:24px;
}
.res-title{
  font-family:'Cinzel',serif;
  font-size:2em;
  color:#ffecd2;
}
.res-text{
  margin:30px 0;
  line-height:1.9;
}
  .res-sub{
  margin-top:22px;
  line-height:1.7;
  opacity:.9;
}


/* 링크 버튼 */
.link-btn{
  display:inline-block;
  margin:8px;
  padding:12px 26px;
  border-radius:30px;
  background:rgba(255,255,255,.15);
  color:#fff;
  text-decoration:none;
  border:none;
  cursor:pointer;
  font-family:'Noto Serif KR',serif;
  font-size:1em;
}

.link-btn:hover{
  background:rgba(255,255,255,.25);
}

/* 플로팅 CTA */
.floating-cta{
  position:fixed;
  right:20px;
  bottom:20px;
  background:#e94560;
  color:#fff;
  padding:14px 26px;
  border-radius:30px;
  font-weight:600;
  text-decoration:none;
  z-index:999;
  box-shadow:0 4px 15px rgba(233,69,96,.5);
}

/* ==========================================
   🎡 룰렛 스타일 - 여기부터 수정됨
========================================== */
#roulette-screen {
  display:none;
  text-align:center;
  padding:60px 20px;
  overflow-y:auto;
}

.roulette-title {
  font-family:'Cinzel',serif;
  font-size:2.5em;
  color:#ffecd2;
  margin-bottom:10px;
  text-shadow:0 0 15px rgba(255,236,210,.4);
}

.roulette-subtitle {
  opacity:.8;
  margin-bottom:40px;
  font-size:1.1em;
}

/* 룰렛 컨테이너 */
.roulette-container {
  width: 350px;
  height: 350px;
  margin: 40px auto;
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
}

.roulette-container canvas {
  max-width: 100%;
  max-height: 100%;
}

/* 포인터 (화살표) */
.roulette-pointer {
  position:absolute;
  top:-30px;
  left:50%;
  transform:translateX(-50%);
  width:0;
  height:0;
  border-left:20px solid transparent;
  border-right:20px solid transparent;
  border-top:35px solid #ffecd2;
  filter:drop-shadow(0 0 8px rgba(255,236,210,.6));
  z-index:10;
  animation:bounce-pointer 1.5s ease-in-out infinite;
}

@keyframes bounce-pointer {
  0%, 100% { transform:translateX(-50%) translateY(0); }
  50% { transform:translateX(-50%) translateY(5px); }
}

/* 룰렛 휠 - 오방색 */
#rouletteWheel {
  width:100%;
  height:100%;
  border-radius:50%;
  background:conic-gradient(
    from 0deg,
    #c43c39 0deg 72deg,    /* 빨강: 0-72도 */
    #2f8f4e 72deg 144deg,  /* 초록: 72-144도 */
    #d6a300 144deg 216deg, /* 노랑: 144-216도 */
    #f4f4f4 216deg 288deg, /* 하양: 216-288도 */
    #2c5fd6 288deg 360deg  /* 파랑: 288-360도 */
  );
  box-shadow:
    0 0 30px rgba(255,236,210,.3),
    inset 0 0 40px rgba(0,0,0,.3);
  transition:transform 4s cubic-bezier(.17,.67,.12,.99);
  position:relative;
}

/* 중앙 장식 */
.roulette-center {
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:80px;
  height:80px;
  border-radius:50%;
  background:rgba(26,26,46,.95);
  border:3px solid #ffecd2;
  box-shadow:0 0 20px rgba(255,236,210,.5);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:2.5em;
  z-index:5;
}

/* 룰렛 버튼 */
.spin-btn {
  background:linear-gradient(135deg, #d1b24b, #9f7f1f);
  color:#1a1200;
  border:none;
  padding:16px 40px;
  font-size:1.2em;
  font-family:'Noto Serif KR',serif;
  font-weight:600;
  border-radius:30px;
  cursor:pointer;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.5),
    0 6px 20px rgba(180,140,40,.4);
  transition:.25s ease;
  margin-top:16px;
}

.spin-btn:hover {
  transform:translateY(-2px);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.5),
    0 8px 25px rgba(180,140,40,.6);
}

.spin-btn:disabled {
  opacity:.5;
  cursor:not-allowed;
  transform:none;
}

/* 결과 표시 */
#rouletteResult {
  margin-top:30px;
  font-size:1.0em;
  min-height:60px;
  line-height:1.6;
  color:#ffecd2;
}

/* 오늘의 운세 3카드 스프레드 */
#daily-fortune-screen {
  display: none;
  padding: 40px 20px;
  max-width: 900px;
  margin: 0 auto;
}

.daily-title {
  font-size: 2em;
  color: #ffecd2;
  margin-bottom: 10px;
}

.daily-subtitle {
  opacity: 0.8;
  margin-bottom: 40px;
  font-size: 1.1em;
}

.three-card-container {
  display: flex;
  justify-content: center;
  gap: 30px;
  margin-bottom: 40px;
  flex-wrap: wrap;
}

.card-position {
  background: rgba(0, 0, 0, 0.4);
  border: 2px solid rgba(255, 236, 210, 0.3);
  border-radius: 15px;
  padding: 25px 20px;
  width: 220px;
  transition: all 0.3s ease;
}

.card-position:hover {
  border-color: rgba(255, 236, 210, 0.6);
  box-shadow: 0 0 20px rgba(255, 236, 210, 0.2);
}

.position-label {
  font-size: 0.9em;
  color: #ffecd2;
  opacity: 0.7;
  margin-bottom: 10px;
}

.card-name {
  font-size: 1.3em;
  color: #ffecd2;
  margin-bottom: 15px;
  font-weight: 600;
}

.card-meaning {
  font-size: 0.95em;
  line-height: 1.6;
  color: #e9e9e9;
  opacity: 0.9;
}

.interpretation-box {
  background: rgba(0, 0, 0, 0.5);
  border: 2px solid rgba(255, 236, 210, 0.4);
  border-radius: 15px;
  padding: 30px;
  margin: 30px auto;
  max-width: 700px;
  text-align: left;
}

.interpretation-title {
  font-size: 1.4em;
  color: #ffecd2;
  margin-bottom: 20px;
  text-align: center;
}

.interpretation-text {
  font-size: 1.05em;
  line-height: 1.8;
  color: #e9e9e9;
  white-space: pre-line;
}

.loading-spinner {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 3px solid rgba(255, 236, 210, 0.3);
  border-radius: 50%;
  border-top-color: #ffecd2;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* 모바일 반응형 */
@media (max-width:768px) {
  .three-card-container {
    flex-direction: column;
    align-items: center;
    gap: 20px;
  }
  
  .card-position {
    width: 90%;
    max-width: 300px;
  }
  
  .interpretation-box {
    padding: 20px;
  }
  
  .roulette-container {
    width: 90vw;
    height: 90vw;
    max-width: 300px;
    max-height: 300px;
    margin: 25px auto;
  }
  
  .spin-btn {
    padding: 13px 28px;
    font-size: 1.05em;
    min-width: 160px;
  }
  
  .link-btn {
    font-size: 0.95em;
    min-width: 140px;
  }
}
</style>
</head>

  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PK39LR79"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<body>

<div id="home-screen">
  <div class="logo">Innermyu</div>
  <div class="subtitle">심해의 마녀, 뮤너가 전하는 카드의 노래</div>

  <div class="menu-grid">

    <a class="menu-btn" href="#" onclick="startReading('belline')">
      <div class="menu-title">🔮 이너뮤 벨린</div>
      <div class="menu-desc">52장의 구슬이 전하는 조언</div>
    </a>

    <a class="menu-btn" href="#" onclick="startReading('tarot')">
      <div class="menu-title">🌙 타로 메이저</div>
      <div class="menu-desc">22장의 영혼의 여정</div>
    </a>

    <a class="menu-btn music" href="https://www.youtube.com/playlist?list=PLVHQVjb061BhLKhBFilofYFlbilqxWqAJ" target="_blank">
      <div class="menu-title">🎧 뮤너의 음악듣기</div>
      <div class="menu-desc">리딩과 함께 흐르는 선율</div>
    </a>

    <a class="menu-btn dm" href="https://open.kakao.com/me/Innermyu" target="_blank">
      <div class="menu-title">💌 1:1 리딩 요청</div>
      <div class="menu-desc">뮤너에게 직접 묻기</div>
    </a>

    <a class="menu-btn" href="#" onclick="goRoulette()">
      <div class="menu-title">🔮 오늘의 룰렛</div>
      <div class="menu-desc">운명의 색을 돌려보세요</div>
    </a>

    <a class="menu-btn" href="#" onclick="startDailyFortune()">
      <div class="menu-title">✨ 오늘의 운세</div>
      <div class="menu-desc">3장의 카드로 보는 하루</div>
    </a>

  </div>
</div>

<div id="deck-screen">
  <h2>카드를 한 장 선택하세요</h2>
  <div class="card-grid" id="cardGrid"></div>
</div>

<div id="result-screen">
  <div class="result-box">
    <h2 id="resultTitle" class="res-title"></h2>
    <p id="resultText" class="res-text"></p>

    <a href="https://www.youtube.com/channel/UCbu0x8dUeJCSgbyw-ap9Y3A"
       target="_blank"
       class="link-btn">🎥 관련 리딩 영상</a>

    <a href="https://open.kakao.com/me/Innermyu"
       target="_blank"
       class="link-btn">💬 1:1 리딩 요청</a>

    <div style="margin-top:30px;">
      <button class="link-btn" onclick="goHome()">처음으로</button>
    </div>
  </div>
</div>


<!-- ==========================================
     🎡 룰렛 화면 - 여기가 업그레이드됨
========================================== -->
<div id="roulette-screen">
  
  <h2 class="roulette-title">🔮 뮤너의 운명 룰렛</h2>
  <p class="roulette-subtitle">심해의 마녀가 당신의 색을 점칩니다</p>

  <div class="roulette-container">
    <!-- Canvas 기반 룰렛 (화살표 + 휠 모두 포함) -->
    <canvas id="rouletteCanvas" width="350" height="350" style="border-radius:50%; box-shadow: 0 0 30px rgba(255,236,210,.3);"></canvas>
  </div>

  <button class="spin-btn" id="spinButton" onclick="spinRoulette()">
    🎡 룰렛 돌리기
  </button>

  <p id="rouletteResult"></p>

  <div style="margin-top:40px; display:flex; flex-direction:column; align-items:center; gap:15px;">
    <a href="https://www.youtube.com/channel/UCbu0x8dUeJCSgbyw-ap9Y3A"
       target="_blank"
       class="link-btn">🎥 유튜브 타로 보기</a>
    
    <button class="link-btn" onclick="goHome()">처음으로</button>
  </div>

</div>


<!-- ==========================================
     ✨ 오늘의 운세 화면
========================================== -->
<div id="daily-fortune-screen">
  
  <h2 class="daily-title">✨ 오늘의 운세</h2>
  <p class="daily-subtitle">심해의 마녀가 3장의 카드로 오늘의 흐름을 읽어드립니다</p>

  <div class="three-card-container" id="threeCardContainer">
    <!-- 카드 3장이 여기에 표시됩니다 -->
  </div>

  <div class="interpretation-box" id="interpretationBox" style="display: none;">
    <h3 class="interpretation-title">🔮 뮤너의 해석</h3>
    <div class="interpretation-text" id="interpretationText"></div>
  </div>

  <div style="margin-top:40px; display:flex; flex-direction:column; align-items:center; gap:15px;">
    <button class="spin-btn" onclick="startDailyFortune()">🔄 다시 보기</button>
    
    <a href="https://www.youtube.com/channel/UCbu0x8dUeJCSgbyw-ap9Y3A"
       target="_blank"
       class="link-btn">🎥 유튜브 타로 보기</a>
    
    <button class="link-btn" onclick="goHome()">처음으로</button>
  </div>

</div>


<a href="https://forms.gle/ecdQzUz3xgpkwmXk8" target="_blank" class="floating-cta">
🎬 뮤비 사연 신청하기
</a>

<script>
/* ======================
   카드 데이터
====================== */

/* 🔮 벨린 52장 */
const bellineDeck = [
{
  title:"태양",
  main:"심해의 마녀, 뮤너가 전해드립니다. 구슬은 눈부신 빛을 노래해요. 숨김없이 드러나는 진실, 더 이상 미뤄둘 수 없는 감정. 지금은 스스로를 작게 만들 필요가 없어요.",
  love:"연애에서는 마음이 명확해지는 카드예요. 상대도 당신의 진심을 이미 느끼고 있습니다.",
  action:"지금은 표현해도 괜찮아요. 웃고, 말하고, 먼저 손을 내밀어 보세요."
},
{
  title:"달",
  main:"구슬은 흔들리는 물결을 비춥니다. 불안과 직관이 동시에 떠오르는 밤. 혼란은 길을 잃었다는 뜻이 아니라 감각이 열렸다는 신호예요.",
  love:"상대의 말보다 분위기와 태도를 보세요. 오해가 생기기 쉬운 시기입니다.",
  action:"확답을 요구하지 말고 한 박자 쉬어가세요."
},
{
  title:"별",
  main:"어둠 속에서도 꺼지지 않는 약속. 지금은 멀어 보여도 이 빛은 당신을 정확히 인도하고 있어요.",
  love:"관계 회복, 새로운 인연 모두 가능성이 열려 있습니다.",
  action:"포기 대신 한 번 더 부드러운 선택을 해보세요."
},
{
  title:"열쇠",
  main:"답은 이미 손안에 있어요. 문은 밖에 있지 않습니다. 당신의 선택이 잠금을 풉니다.",
  love:"상대의 마음을 여는 열쇠는 태도와 타이밍입니다.",
  action:"정답을 찾으려 애쓰기보다 지금 할 수 있는 선택을 하세요."
},
{
  title:"탑",
  main:"무너짐은 벌이 아니라 해방입니다. 오래 버텨온 구조가 내려가야 숨을 쉴 수 있어요.",
  love:"연애에서 충격적인 깨달음이 있을 수 있어요. 하지만 이 변화는 필요했습니다.",
  action:"집착을 내려놓고 새로운 기준을 세우세요."
},
{
  title:"꽃다발",
  main:"구슬은 예상치 못한 기쁨을 비춥니다. 지금의 흐름은 당신 편이에요.",
  love:"호감, 선물, 기쁜 제안이 들어올 수 있습니다.",
  action:"받는 것을 미안해하지 말고 기쁘게 받아들이세요."
},
{
  title:"뱀",
  main:"부드러운 말 속에 숨은 의도를 구슬이 속삭입니다. 모든 친절이 같은 깊이는 아니에요.",
  love:"상대의 말보다 행동을 보세요. 감정은 숨길 수 있어도 태도는 거짓말하지 않아요.",
  action:"직감이 불편하다면 일단 한 발짝 물러나세요."
},
{
  title:"개",
  main:"충성과 신뢰, 곁을 지키는 존재의 온기. 진정한 동반자는 화려한 말이 아닌 묵묵한 곁지킴으로 증명됩니다. 흔들리지 않는 마음, 변하지 않는 관계의 가치를 느껴보세요.",
  love:"진심은 말이 아니라 시간으로 증명됩니다. 상대의 행동을 지켜보세요. 변하지 않는 마음은 결국 드러나요.",
  action:"의심보다 믿음을 선택하세요. 곁에 있는 사람의 진심을 느껴보세요."
},
{
  title:"새",
  main:"소식과 변화가 날아옵니다. 기다리던 연락, 예상치 못한 만남. 새는 메시지를 실어 나르는 존재예요. 멈춰있던 관계에 움직임이 생깁니다.",
  love:"멀리 있던 마음이 돌아옵니다. 연락이 오거나 우연한 만남이 이어질 수 있어요.",
  action:"열린 마음으로 받아들이세요. 변화를 두려워하지 마세요."
},
{
  title:"다리",
  main:"연결과 이동, 중간지대에 서 있어요. 다리는 두 세계를 잇는 통로. 지금은 과거와 미래 사이, 끝과 시작 사이에 있습니다. 건너야 할 순간이 왔어요.",
  love:"관계의 전환점이에요. 친구에서 연인으로, 또는 그 반대로. 애매함이 끝나는 시기입니다.",
  action:"건너기를 망설이지 마세요. 멈춰 서 있으면 아무것도 달라지지 않아요."
},
{
  title:"배신",
  main:"이중성과 거짓, 감춰진 진실이 드러나는 순간. 보고 싶지 않던 것을 마주하게 됩니다. 아프지만 이제는 알아야 할 때예요.",
  love:"보고 싶은 것만 보고 있진 않나요? 상대의 행동과 말이 다르다면 그게 답입니다.",
  action:"사실을 마주하세요. 외면은 상처를 더 깊게 만들 뿐이에요."
},
{
  title:"선물",
  main:"예상치 못한 기쁨이 찾아옵니다. 받을 준비가 되어 있나요? 선물은 때로 작은 것에서 옵니다. 따뜻한 말 한마디, 우연한 만남, 의외의 호의.",
  love:"호의는 진심일 수 있어요. 의심보다 감사함으로 받아들여보세요.",
  action:"감사히 받으세요. 받는 것을 부담스러워하지 마세요."
},
{
  title:"질투",
  main:"비교와 불안, 소유하고 싶은 마음. 질투는 사랑에서 오지만 사랑을 파괴하기도 해요. 상대를 믿지 못하는 건 자신을 믿지 못하는 것일 수 있습니다.",
  love:"집착은 사랑을 멀어지게 합니다. 붙잡을수록 더 도망가요.",
  action:"놓으면 돌아와요. 믿음은 강요할 수 없어요."
},
{
  title:"길",
  main:"선택과 방향, 갈림길에 섰어요. 두 길 모두 의미가 있지만 동시에 갈 수는 없습니다. 지금은 결정의 순간이에요.",
  love:"둘 다 가질 순 없어요. 마음이 진짜 원하는 것을 선택하세요.",
  action:"마음이 가는 쪽을 따르세요. 머리가 아닌 가슴의 소리를 들어보세요."
},
{
  title:"병",
  main:"정체와 막힘, 내면의 독이 쌓여 있어요. 말하지 못한 감정, 삼킨 말들이 병이 됩니다. 이제는 풀어내야 할 때예요.",
  love:"쌓인 감정을 풀어내야 해요. 참는 것이 배려는 아니에요.",
  action:"솔직한 대화가 필요합니다. 담아두지 말고 꺼내세요."
},
{
  title:"항해",
  main:"모험과 출발, 익숙함을 벗어나는 용기. 항해는 안전한 항구를 떠나는 것에서 시작됩니다. 두렵지만 떠나야 할 때가 있어요.",
  love:"새로운 관계, 새로운 단계로 나아갑니다. 변화를 받아들일 준비를 하세요.",
  action:"두려움을 넘어서세요. 안전지대 밖에 진짜 삶이 있어요."
},
{
  title:"추락",
  main:"갑작스러운 변화, 예상치 못한 끝. 추락은 두렵지만 때론 새로운 시작의 전조예요. 바닥을 찍어야 다시 오를 수 있습니다.",
  love:"무너질 것 같아도 견딜 수 있어요. 끝처럼 보여도 견뎌낼 힘이 있습니다.",
  action:"일어서는 법을 배우세요. 추락 자체가 아니라 일어서지 않는 것이 진짜 실패예요."
},
{
  title:"불",
  main:"정화와 파괴, 타오르는 열정. 불은 모든 것을 태우지만 재 속에서 새로움이 시작됩니다. 격렬한 감정, 뜨거운 순간.",
  love:"격렬하지만 지속 가능한가요? 열정은 아름답지만 태워버릴 수도 있어요.",
  action:"식히거나 태우거나. 중간은 없어요."
},
{
  title:"얼음",
  main:"얼어붙은 감정, 차가운 거리. 얼음은 투명하지만 단단합니다. 관계가 정지된 듯 보여요. 누군가 마음의 문을 닫았어요.",
  love:"관계가 정지돼 있어요. 감정이 식었거나 소통이 끊긴 상태입니다.",
  action:"녹이거나 놓아주세요. 억지로 부술 순 없어요."
},
{
  title:"빛",
  main:"희망과 각성, 어둠의 끝. 빛은 언제나 어둠 뒤에 옵니다. 진실이 드러나는 순간, 명확해지는 마음. 더 이상 혼란스럽지 않아요.",
  love:"진심이 드러나는 순간이 옵니다. 상대의 마음이 분명해져요.",
  action:"더 이상 숨기지 마세요. 빛 속에서는 모든 것이 보입니다."
},
{
  title:"그림자",
  main:"숨겨진 면, 보고 싶지 않은 진실. 그림자는 빛이 있어야 생깁니다. 밝은 면 뒤에 숨은 어두운 면, 모든 것엔 양면이 있어요.",
  love:"상대의 또 다른 얼굴을 보게 됩니다. 완벽해 보이던 사람의 다른 모습.",
  action:"있는 그대로 보세요. 그림자까지 받아들여야 진짜 관계예요."
},
{
  title:"문지기",
  main:"경계와 보호, 들어갈 수 없는 마음. 문지기는 허락받지 않은 자를 막습니다. 상대가 마음의 문을 지키고 있어요.",
  love:"상대가 벽을 쌓고 있어요. 아직 마음을 열 준비가 안 된 것 같아요.",
  action:"강요하지 말고 기다리세요. 억지로 들어가면 더 닫혀요."
},
{
  title:"마법사",
  main:"변화와 창조, 손끝의 힘. 마법사는 현실을 바꾸는 사람입니다. 당신에게 그 힘이 있어요. 관계는 주어지는 게 아니라 만들어가는 거예요.",
  love:"관계는 당신이 만들어가는 것. 수동적으로 기다리지 마세요.",
  action:"주도권을 쥐세요. 원하는 관계를 직접 만들어가세요."
},
{
  title:"거울",
  main:"반사와 진실, 스스로를 보는 것. 거울은 있는 그대로를 보여줍니다. 상대를 통해 자신을 보고, 자신을 통해 관계를 봅니다.",
  love:"상대가 아니라 자신의 마음을 확인하세요. 투영하고 있는 건 아닌가요?",
  action:"솔직해지세요. 거울 앞에선 거짓말이 통하지 않아요."
},
{
  title:"가면",
  main:"감춤과 연기, 진짜가 아닌 것. 가면은 편리하지만 숨막힙니다. 오래 쓰고 있으면 진짜 얼굴을 잊어버려요.",
  love:"상대도 당신도 가면을 쓰고 있어요. 진짜 모습을 보여주지 않고 있습니다.",
  action:"벗어도 괜찮아요. 진짜 모습으로 만나야 진짜 관계가 시작돼요."
},
{
  title:"손",
  main:"도움과 연결, 함께 가는 것. 손은 잡고, 주고, 만지는 것. 관계는 손을 내밀 때 시작됩니다.",
  love:"혼자가 아니에요. 누군가 당신의 손을 잡으려 하고 있어요.",
  action:"손을 내밀거나 잡으세요. 혼자 견딜 필요 없어요."
},
{
  title:"눈물",
  main:"슬픔과 정화, 흘려내야 할 것. 눈물은 약함이 아니라 정직함입니다. 참으면 독이 되지만 흘리면 씻겨나가요.",
  love:"울어야 풀립니다. 감정을 억누르지 마세요.",
  action:"참지 마세요. 우는 것도 용기예요."
},
{
  title:"웃음",
  main:"기쁨과 가벼움, 긴장의 해소. 웃음은 무거운 공기를 바꿉니다. 진지함도 필요하지만 때론 가벼움이 답이에요.",
  love:"진지함 대신 유머를. 웃으면서 하는 대화가 더 깊을 때가 있어요.",
  action:"웃으며 대화하세요. 분위기를 바꿔보세요."
},
{
  title:"칼",
  main:"단절과 정리, 끊어야 할 것. 칼은 아프지만 명확합니다. 애매함을 끝내고 정리할 때 사용하는 도구예요.",
  love:"미련을 자르세요. 깔끔하게 정리해야 다음으로 갈 수 있어요.",
  action:"깔끔하게 정리하세요. 흐지부지는 더 아파요."
},
{
  title:"심장",
  main:"사랑과 진심, 뛰는 마음. 심장은 거짓말하지 않습니다. 머리는 속여도 가슴은 알고 있어요.",
  love:"감정은 거짓말하지 않아요. 떨리는 마음, 두근거림을 믿으세요.",
  action:"마음을 따르세요. 이성적 판단도 중요하지만 감정도 진실이에요."
},
{
  title:"뿌리",
  main:"근원과 토대, 시작을 돌아보는 것. 뿌리가 튼튼해야 나무가 자랍니다. 지금의 관계가 어디서 시작됐는지 보세요.",
  love:"관계의 기반을 보세요. 처음의 마음을 떠올려보세요.",
  action:"뿌리부터 돌아보세요. 시작이 중요해요."
},
{
  title:"날개",
  main:"자유와 해방, 떠나는 용기. 날개는 묶인 것을 풀어줍니다. 놓아주는 것도 사랑이에요.",
  love:"붙잡지 말고 날려보내세요. 억지로 붙들면 더 상처받아요.",
  action:"가볍게 풀어주세요. 자유를 주는 것이 진짜 사랑일 때도 있어요."
},
{
  title:"문",
  main:"입구와 기회, 열려있는 가능성. 문은 들어가라는 초대입니다. 기회는 이미 앞에 있어요.",
  love:"새로운 시작의 문이 열려 있어요. 들어갈 준비만 하면 돼요.",
  action:"들어가세요. 망설이면 닫힐 수도 있어요."
},
{
  title:"창",
  main:"시야와 관점, 보는 방법. 같은 풍경도 창에 따라 다르게 보입니다. 시선을 바꾸면 새로운 게 보여요.",
  love:"다르게 보면 답이 보여요. 한 방향에서만 보지 마세요.",
  action:"시선을 바꾸세요. 관점을 바꾸면 관계도 바뀌어요."
},
{
  title:"벽",
  main:"막힘과 경계, 넘을 수 없는 것. 벽은 보호이기도 하지만 단절이기도 합니다. 지금은 넘어갈 수 없어요.",
  love:"상대는 준비가 안 됐어요. 벽을 존중해야 할 때도 있어요.",
  action:"억지로 부수지 마세요. 때가 되면 문이 열려요."
},
{
  title:"닻",
  main:"머무름과 고착, 안정의 무게. 닻은 배를 지키지만 동시에 묶어둡니다. 안정과 정체는 한 끝 차이예요.",
  love:"익숙함이 사랑을 대신할 수 있어요. 편함과 진짜 사랑은 다릅니다.",
  action:"계속 머물 이유를 점검하세요. 두려움 때문은 아닌가요?"
},
{
  title:"물고기",
  main:"풍요와 흐름, 받을 준비가 되었나요? 물고기는 자연스럽게 헤엄칩니다. 억지로 잡으려 하지 말고 흐름을 따르세요.",
  love:"감정과 관계가 자연스럽게 흘러옵니다. 애쓰지 않아도 돼요.",
  action:"기회를 거절하지 마세요. 자연스럽게 받아들이세요."
},
{
  title:"무지개",
  main:"갈등 후의 조화, 끝은 희망으로 이어집니다. 무지개는 비가 온 뒤에만 뜹니다. 힘든 시간 뒤에 아름다움이 와요.",
  love:"화해와 회복의 가능성이 보여요. 관계가 다시 좋아질 수 있어요.",
  action:"먼저 손을 내밀어도 돼요. 용서는 상대가 아니라 나를 위한 거예요."
},
{
  title:"왕관",
  main:"자존과 권위, 스스로를 낮추지 마세요. 왕관은 스스로에게 씌우는 것입니다. 당신은 존중받을 가치가 있어요.",
  love:"존중받아야 할 관계예요. 굽히고 맞추기만 하는 건 사랑이 아니에요.",
  action:"기준을 지키세요. 스스로를 함부로 대하지 마세요."
},
{
  title:"사다리",
  main:"단계적 상승, 서두르지 않아도 돼요. 사다리는 한 계단씩 오릅니다. 급하게 뛰어오르려다 떨어지지 마세요.",
  love:"관계가 한 단계씩 발전합니다. 성급하게 다음 단계로 가려 하지 마세요.",
  action:"지금 단계에 충실하세요. 천천히 가도 괜찮아요."
},
{
  title:"시계",
  main:"타이밍, 아직은 기다림. 모든 것엔 때가 있습니다. 지금은 기다리는 시간일 수 있어요.",
  love:"지금은 때가 아닐 수 있어요. 조급함은 관계를 망칩니다.",
  action:"조급해하지 마세요. 때가 되면 자연스럽게 이루어져요."
},
{
  title:"배",
  main:"이동과 변화, 항해는 시작됐습니다. 배는 멈춰있지 않고 계속 움직입니다. 환경이 바뀌고 있어요.",
  love:"관계의 환경이 바뀔 수 있어요. 물리적 거리나 상황의 변화.",
  action:"변화를 받아들이세요. 저항하지 말고 흐름을 타세요."
},
{
  title:"비",
  main:"정화의 물결, 울어도 괜찮아요. 비는 씻어냅니다. 쌓인 먼지, 묵은 감정. 눈물도 비처럼 정화의 역할을 해요.",
  love:"감정 해소가 필요합니다. 억눌린 감정이 쌓여 있어요.",
  action:"감정을 억누르지 마세요. 흘러내려야 할 것들이 있어요."
},
{
  title:"촛불",
  main:"작은 불빛 하나가 길을 밝힙니다. 촛불은 작지만 어둠을 밝혀요. 희미하지만 진짜인 감정, 작지만 소중한 희망.",
  love:"희미하지만 진짜 감정이 있어요. 크지 않아도 진심이면 충분해요.",
  action:"그 불씨를 보호하세요. 바람에 꺼지지 않게 지켜주세요."
},
{
  title:"창문",
  main:"새로운 시야, 다른 각도로 보는 것. 창문을 열면 다른 풍경이 보입니다. 관점을 바꿔보세요.",
  love:"관계를 새롭게 보게 됩니다. 다른 시선으로 바라보면 달라 보여요.",
  action:"시선을 바꿔보세요. 고정된 생각에서 벗어나세요."
},
{
  title:"우물",
  main:"깊은 감정과 진실, 표면만 보지 마세요. 우물은 깊고 차갑습니다. 겉으로 보이는 것 너머를 봐야 해요.",
  love:"숨겨진 감정이 있습니다. 표면의 말만 듣지 말고 깊이를 보세요.",
  action:"천천히 내려다보세요. 진실은 깊은 곳에 있어요."
},
{
  title:"종",
  main:"각성의 순간, 더 이상 모를 수 없어요. 종은 깨움니다. 이제는 알게 됐어요. 외면할 수 없는 진실.",
  love:"결정의 시간이 옵니다. 더 이상 미룰 수 없어요.",
  action:"깨달음을 행동으로 옮기세요. 아는 것과 하는 것은 달라요."
},
{
  title:"깃발",
  main:"선언과 결단, 입장을 분명히 할 때. 깃발은 명확한 표시입니다. 애매함을 끝내고 입장을 정해야 해요.",
  love:"관계의 방향이 정해집니다. 친구인지 연인인지 분명히 해야 할 때.",
  action:"애매함을 끝내세요. 분명한 태도가 필요해요."
},
{
  title:"구슬",
  main:"운명은 지금도 움직이고 있어요. 구슬은 굴러갑니다. 보이지 않는 연결, 예측할 수 없는 흐름. 믿고 맡기세요.",
  love:"보이지 않는 연결이 있어요. 우연처럼 보이는 필연.",
  action:"흐름을 믿으세요. 모든 것은 때가 되면 제자리를 찾아가요."
}
];


/* 🌙 타로 메이저 22장 – Innermyu / 뮤너 문체 풀버전 */

const tarotDeck = [
{
  title: "0. The Fool",
  main: "심해의 마녀, 뮤너가 전해드립니다. 구슬은 이렇게 노래하고 있어요. 이 카드는 무모함이 아니라 신뢰를 말합니다. 아직 모든 것이 정리되지 않았어도 괜찮아요. 당신의 영혼은 이미 '가야 할 방향'을 알고 있고, 지금은 안전함보다 진실함을 택해야 할 때입니다.",
  love: "연애에서는 새로운 인연, 혹은 관계를 다시 시작하라는 메시지예요. 계산보다 마음이 먼저 움직일 수 있어요.",
  action: "완벽해질 때까지 기다리지 마세요. 작은 한 걸음이 흐름을 바꿉니다."
},
{
  title: "1. The Magician",
  main: "뮤너는 손끝에 모인 빛을 보여줍니다. 이미 필요한 재료는 모두 당신 앞에 있어요. 문제는 '없음'이 아니라 '믿지 않음'입니다. 지금 당신은 창조자의 자리 위에 서 있습니다.",
  love: "연애에서는 주도권이 당신에게 있어요. 표현하지 않으면 상대는 알 수 없어요.",
  action: "지금 할 수 있는 가장 작은 실행을 바로 시작하세요."
},
{
  title: "2. The High Priestess",
  main: "구슬은 깊은 침묵 속에서 흔들립니다. 답은 아직 말의 형태가 아니에요. 이 카드는 기다림과 직관을 의미합니다. 모든 진실은 드러날 시간이 있습니다.",
  love: "연애에서는 숨겨진 감정, 혹은 말하지 않은 마음이 존재해요.",
  action: "지금은 움직이기보다 관찰하세요. 느낌을 무시하지 마세요."
},
{
  title: "3. The Empress",
  main: "뮤너는 풍요로운 숨결을 느낍니다. 이 카드는 돌봄과 성장의 에너지. 당신이 쏟은 애정은 헛되지 않았어요. 곧 형태를 갖추게 됩니다.",
  love: "연애에서는 안정, 배려, 따뜻한 연결이 강조돼요.",
  action: "스스로를 돌보는 일을 우선하세요."
},
{
  title: "4. The Emperor",
  main: "구슬은 단단한 기반을 비춥니다. 이 카드는 책임과 구조. 감정에 휘둘리기보다 기준을 세워야 할 때입니다.",
  love: "연애에서는 관계의 틀과 약속이 중요해져요.",
  action: "경계를 분명히 하고 결정하세요."
},
{
  title: "5. The Hierophant",
  main: "뮤너는 오래된 지혜의 목소리를 듣습니다. 이 카드는 전통과 배움. 이미 배워온 것 안에 답이 있어요.",
  love: "연애에서는 진지한 관계, 혹은 가치관의 일치가 핵심이에요.",
  action: "익숙한 방식이 지금은 정답입니다."
},
{
  title: "6. The Lovers",
  main: "구슬은 두 개의 길을 비춥니다. 사랑은 감정이 아니라 선택입니다. 이 카드는 당신의 진심이 어디에 있는지를 묻습니다.",
  love: "연애에서는 중요한 선택의 순간이에요.",
  action: "타인의 기대보다 자신의 마음을 기준으로 선택하세요."
},
{
  title: "7. The Chariot",
  main: "뮤너는 빠르게 흐르는 물살을 봅니다. 이 카드는 전진과 승리. 흔들려도 멈추지 않는 것이 핵심이에요.",
  love: "연애에서는 관계를 밀고 나가야 할 때입니다.",
  action: "주저하지 말고 속도를 내세요."
},
{
  title: "8. Strength",
  main: "구슬은 부드러운 힘을 비춥니다. 억누르는 것이 아니라 이해하는 것. 진짜 강함은 온기에서 나옵니다.",
  love: "연애에서는 다그치기보다 품어주세요.",
  action: "감정을 통제하지 말고 조율하세요."
},
{
  title: "9. The Hermit",
  main: "뮤너는 고요한 어둠 속에서 빛을 찾습니다. 이 카드는 고독한 탐색. 혼자 있는 시간이 필요합니다.",
  love: "연애에서는 잠시 거리 두기가 필요할 수 있어요.",
  action: "외부의 소음에서 벗어나세요."
},
{
  title: "10. Wheel of Fortune",
  main: "구슬이 회전합니다. 흐름이 바뀌고 있어요. 통제할 수 없는 변화이지만, 거부할 필요는 없습니다.",
  love: "연애에서는 예상치 못한 전개가 있을 수 있어요.",
  action: "흐름을 거스르지 말고 타세요."
},
{
  title: "11. Justice",
  main: "뮤너는 저울을 듭니다. 모든 선택에는 책임이 따릅니다. 지금은 감정보다 균형이 필요해요.",
  love: "연애에서는 공정한 대화가 필요합니다.",
  action: "사실을 있는 그대로 보세요."
},
{
  title: "12. The Hanged Man",
  main: "구슬은 거꾸로 세상을 비춥니다. 멈춤은 패배가 아닙니다. 다른 시야가 열리는 순간이에요.",
  love: "연애에서는 인내가 필요해요.",
  action: "억지로 움직이지 마세요."
},
{
  title: "13. Death",
  main: "뮤너는 끝의 문을 엽니다. 이것은 파괴가 아니라 정리입니다. 새로운 숨이 들어오기 위한 공간.",
  love: "연애에서는 한 챕터의 종료를 의미할 수 있어요.",
  action: "놓아야 할 것을 놓으세요."
},
{
  title: "14. Temperance",
  main: "구슬은 두 흐름을 섞습니다. 극단을 피하고 중간을 찾으세요.",
  love: "연애에서는 조율과 이해가 핵심이에요.",
  action: "천천히 균형을 맞추세요."
},
{
  title: "15. The Devil",
  main: "뮤너는 보이지 않는 사슬을 봅니다. 집착은 사랑이 아닙니다.",
  love: "연애에서는 의존이나 집착을 점검하세요.",
  action: "스스로를 묶고 있는 생각을 풀어내세요."
},
{
  title: "16. The Tower",
  main: "구슬이 산산이 부서집니다. 진실 앞에서 거짓은 유지될 수 없어요.",
  love: "연애에서는 충격적인 깨달음이 있을 수 있어요.",
  action: "무너짐을 두려워하지 마세요."
},
{
  title: "17. The Star",
  main: "뮤너는 밤하늘의 약속을 가리킵니다. 이 카드는 회복과 희망.",
  love: "연애에서는 다시 믿을 수 있는 흐름이에요.",
  action: "희망을 놓지 마세요."
},
{
  title: "18. The Moon",
  main: "구슬은 흔들리는 그림자를 비춥니다. 모든 감정이 사실은 아닙니다.",
  love: "연애에서는 오해와 불안이 섞여 있을 수 있어요.",
  action: "확인되지 않은 상상에 휘둘리지 마세요."
},
{
  title: "19. The Sun",
  main: "뮤너는 밝게 웃습니다. 이 카드는 명료함과 기쁨.",
  love: "연애에서는 솔직함이 관계를 밝힙니다.",
  action: "숨기지 말고 드러내세요."
},
{
  title: "20. Judgement",
  main: "구슬이 울립니다. 과거는 끝났고, 새로운 부름이 시작돼요.",
  love: "연애에서는 중요한 결단의 순간이에요.",
  action: "과거의 자신을 놓아주세요."
},
{
  title: "21. The World",
  main: "뮤너는 고개를 끄덕입니다. 완성의 자리. 여기까지 잘 왔어요.",
  love: "연애에서는 안정과 성취를 의미해요.",
  action: "스스로를 인정하세요."
}
];




let currentDeck=[];

/* ======================
   로직
====================== */
function startReading(type){
  currentDeck = (type==='tarot') ? tarotDeck : bellineDeck;
  document.getElementById('home-screen').style.display='none';
  document.getElementById('deck-screen').style.display='block';
  document.getElementById('result-screen').style.display='none';
  document.getElementById('roulette-screen').style.display='none'; 
  renderSpread();
}

function renderSpread(){
  const g=document.getElementById('cardGrid');
  g.innerHTML='';
  for(let i=0;i<12;i++){
    const c=document.createElement('div');
    c.className='card';
    c.onclick=pickCard;
    g.appendChild(c);
  }
}

function pickCard(){
  const card = currentDeck[Math.floor(Math.random()*currentDeck.length)];

  document.getElementById('deck-screen').style.display = 'none';
  document.getElementById('result-screen').style.display = 'block';

  document.getElementById('resultTitle').innerText = card.title;
  document.getElementById('roulette-screen').style.display = 'none';

  document.getElementById('resultText').innerHTML = `
    <p style="margin-bottom:22px; line-height:1.9;">
      ${card.main}
    </p>

    <hr style="border:none; border-top:1px solid rgba(255,255,255,.15); margin:26px 0;">

    <p style="opacity:.85; line-height:1.7;">
      💗 <b>연애에서의 의미</b><br>
      ${card.love}
    </p>

    <p style="opacity:.85; line-height:1.7; margin-top:16px;">
      ✨ <b>지금 행동 조언</b><br>
      ${card.action}
    </p>
  `;
}
  
function goRoulette() {
  document.getElementById("home-screen").style.display = "none";
  document.getElementById("deck-screen").style.display = "none";
  document.getElementById("result-screen").style.display = "none";
  document.getElementById("roulette-screen").style.display = "block";
  // Canvas 초기 그리기
  if (rouletteCtx && !isSpinning) {
    drawRoulette(currentRotation);
  }
}

/* ==========================================
   🎡 Canvas 기반 정밀 룰렛
========================================== */

// Canvas 초기화
const rouletteCanvas = document.getElementById('rouletteCanvas');
const rouletteCtx = rouletteCanvas ? rouletteCanvas.getContext('2d') : null;

const canvasSize = 350;
const rouletteCenterX = canvasSize / 2;
const rouletteCenterY = canvasSize / 2;
const wheelRadius = 150;

let currentRotation = 0;
let isSpinning = false;

// 오방색 정의
const obangsaek = [
  { name: "빨강 (적색)", emoji: "🔴", hex: "#c43c39", rgb: [196, 60, 57], start: 0, end: 72,
    message: "남쪽을 상징하는 빨강색! 불의 기운이 당신에게 열정과 활력을 불어넣을 것입니다." },
  { name: "초록 (녹색)", emoji: "🟢", hex: "#2f8f4e", rgb: [47, 143, 78], start: 72, end: 144,
    message: "동쪽을 상징하는 초록색! 나무의 기운이 당신에게 새로운 시작과 성장을 가져다줄 것입니다." },
  { name: "노랑 (황색)", emoji: "🟡", hex: "#d6a300", rgb: [214, 163, 0], start: 144, end: 216,
    message: "중앙을 상징하는 노란색! 땅의 기운이 당신에게 안정과 풍요를 가져다줄 것입니다." },
  { name: "하양 (백색)", emoji: "⚪", hex: "#f4f4f4", rgb: [244, 244, 244], start: 216, end: 288,
    message: "서쪽을 상징하는 하얀색! 금의 기운이 당신에게 맑고 순수한 마음을 선물할 것입니다." },
  { name: "파랑 (청색)", emoji: "🔵", hex: "#2c5fd6", rgb: [44, 95, 214], start: 288, end: 360,
    message: "북쪽을 상징하는 파란색! 물의 기운이 당신에게 지혜와 통찰력을 가져다줄 것입니다." }
];

// Canvas에 전체 그리기 (화살표 + 룰렛)
function drawRoulette(wheelRotation) {
  if (!rouletteCtx) return;
  
  const ctx = rouletteCtx;
  
  // 배경 지우기
  ctx.clearRect(0, 0, canvasSize, canvasSize);
  
  // === 룰렛 그리기 (회전) ===
  ctx.save();
  ctx.translate(rouletteCenterX, rouletteCenterY);
  ctx.rotate((wheelRotation * Math.PI) / 180);
  ctx.translate(-rouletteCenterX, -rouletteCenterY);
  
  // 각 색상 섹션
  obangsaek.forEach(color => {
    ctx.fillStyle = color.hex;
    ctx.beginPath();
    ctx.moveTo(rouletteCenterX, rouletteCenterY);
    ctx.arc(rouletteCenterX, rouletteCenterY, wheelRadius,
            (color.start * Math.PI) / 180,
            (color.end * Math.PI) / 180);
    ctx.closePath();
    ctx.fill();
  });
  
  ctx.restore();
  
  // 중앙 검은 원
  ctx.fillStyle = 'rgba(26,26,46,.95)';
  ctx.beginPath();
  ctx.arc(rouletteCenterX, rouletteCenterY, 40, 0, Math.PI * 2);
  ctx.fill();
  ctx.strokeStyle = '#ffecd2';
  ctx.lineWidth = 3;
  ctx.stroke();
  
  // 중앙 이모티콘
  ctx.font = 'bold 35px Arial';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText('🔮', rouletteCenterX, rouletteCenterY);
  
  // === 화살표 그리기 (고정, 회전 안 함) ===
  const arrowY = rouletteCenterY - wheelRadius - 25;
  
  ctx.save();
  ctx.fillStyle = '#ffecd2';
  ctx.strokeStyle = '#ffecd2';
  ctx.lineWidth = 2;
  
  // 화살표 삼각형 (아래를 가리킴)
  ctx.beginPath();
  ctx.moveTo(rouletteCenterX, arrowY + 30);      // 아래 꼭지점
  ctx.lineTo(rouletteCenterX - 18, arrowY);      // 왼쪽 위
  ctx.lineTo(rouletteCenterX + 18, arrowY);      // 오른쪽 위
  ctx.closePath();
  ctx.fill();
  
  // 발광 효과
  ctx.shadowColor = 'rgba(255, 236, 210, 0.8)';
  ctx.shadowBlur = 12;
  ctx.fill();
  ctx.shadowBlur = 0;
  
  ctx.restore();
}

// RGB 값으로 색상 판별
function getColorFromRGB(r, g, b) {
  let minDistance = Infinity;
  let closestColor = obangsaek[0];
  
  obangsaek.forEach(color => {
    const distance = Math.sqrt(
      Math.pow(r - color.rgb[0], 2) +
      Math.pow(g - color.rgb[1], 2) +
      Math.pow(b - color.rgb[2], 2)
    );
    
    if (distance < minDistance) {
      minDistance = distance;
      closestColor = color;
    }
  });
  
  return closestColor;
}

// 화살표 끝점의 색상 감지
function detectColorAtArrow() {
  if (!rouletteCtx) return obangsaek[0];
  
  // 화살표 끝점 위치
  const arrowTipX = rouletteCenterX;
  const arrowTipY = rouletteCenterY - wheelRadius - 25 + 30;
  
  // 화살표 바로 아래 룰렛 부분
  const detectY = arrowTipY + 5;
  
  // 픽셀 색상 읽기
  const imageData = rouletteCtx.getImageData(arrowTipX, detectY, 1, 1);
  const r = imageData.data[0];
  const g = imageData.data[1];
  const b = imageData.data[2];
  
  return getColorFromRGB(r, g, b);
}

// 룰렛 돌리기
function spinRoulette() {
  if (isSpinning || !rouletteCtx) return;
  
  const spinButton = document.getElementById("spinButton");
  const resultText = document.getElementById("rouletteResult");
  
  isSpinning = true;
  spinButton.disabled = true;
  resultText.innerText = "🔮 운명의 색이 결정되는 중...";
  
  // 랜덤 회전
  const extraSpins = 5 + Math.floor(Math.random() * 3);
  const randomAngle = Math.floor(Math.random() * 360);
  const totalRotation = (extraSpins * 360) + randomAngle;
  
  const targetRotation = currentRotation + totalRotation;
  const duration = 4000;
  const startTime = Date.now();
  const startRotation = currentRotation;
  
  // 애니메이션
  function animate() {
    const now = Date.now();
    const elapsed = now - startTime;
    const progress = Math.min(elapsed / duration, 1);
    
    // Easing (cubic-bezier)
    const easeProgress = progress < 0.5
      ? 2 * progress * progress
      : 1 - Math.pow(-2 * progress + 2, 2) / 2;
    
    currentRotation = startRotation + (totalRotation * easeProgress);
    drawRoulette(currentRotation);
    
    if (progress < 1) {
      requestAnimationFrame(animate);
    } else {
      // 회전 완료
      currentRotation = targetRotation % 360;
      drawRoulette(currentRotation);
      
      // 색상 감지
      setTimeout(() => {
        const detectedColor = detectColorAtArrow();
        
        resultText.innerHTML = `
          <div style="font-size:1.5em; margin-bottom:10px;">
            ${detectedColor.emoji} ${detectedColor.name}
          </div>
          <div style="font-size:1em; opacity:0.9; line-height:1.6;">
            ${detectedColor.message}
          </div>
        `;
        
        isSpinning = false;
        spinButton.disabled = false;
      }, 200);
    }
  }
  
  animate();
}

// 페이지 로드 시 초기 그리기
if (rouletteCtx) {
  drawRoulette(0);
}

  // 화면 크기에 따라 Canvas 크기 자동 조정
function getCanvasSize() {
  if (window.innerWidth <= 768) {
    return Math.min(window.innerWidth * 0.9, 300);
  }
  return 350;
}

// 윈도우 리사이즈 감지
window.addEventListener('resize', updateCanvasSize);


function goHome(){
  document.getElementById('deck-screen').style.display='none';
  document.getElementById('result-screen').style.display='none';
  document.getElementById('roulette-screen').style.display='none';
  document.getElementById('daily-fortune-screen').style.display='none';
  document.getElementById('home-screen').style.display='block';
}

/* ======================
   오늘의 운세 - 3카드 스프레드
====================== */

function startDailyFortune() {
  // 화면 전환
  document.getElementById('home-screen').style.display='none';
  document.getElementById('daily-fortune-screen').style.display='block';
  
  // 벨린 덱과 타로 덱을 합침 (더 다양한 해석)
  const combinedDeck = [...bellineDeck, ...tarotDeck];
  
  // 랜덤하게 3장 선택 (중복 없이)
  const selectedCards = [];
  const usedIndices = new Set();
  
  while (selectedCards.length < 3) {
    const randomIndex = Math.floor(Math.random() * combinedDeck.length);
    if (!usedIndices.has(randomIndex)) {
      usedIndices.add(randomIndex);
      selectedCards.push(combinedDeck[randomIndex]);
    }
  }
  
  // 카드 표시
  displayThreeCards(selectedCards);
  
  // AI 해석 생성
  generateInterpretation(selectedCards);
}

function displayThreeCards(cards) {
  const container = document.getElementById('threeCardContainer');
  const positions = ['과거', '현재', '미래'];
  const meanings = ['지나온 흐름', '지금 이 순간', '다가올 길'];
  
  container.innerHTML = '';
  
  cards.forEach((card, index) => {
    const cardDiv = document.createElement('div');
    cardDiv.className = 'card-position';
    cardDiv.innerHTML = `
      <div class="position-label">${positions[index]} · ${meanings[index]}</div>
      <div class="card-name">${card.title}</div>
      <div class="card-meaning">${card.main}</div>
    `;
    container.appendChild(cardDiv);
  });
}

async function generateInterpretation(cards) {
  const interpretationBox = document.getElementById('interpretationBox');
  const interpretationText = document.getElementById('interpretationText');
  
  // 로딩 표시
  interpretationBox.style.display = 'block';
  interpretationText.innerHTML = '<div style="text-align: center;"><div class="loading-spinner"></div><br>심해의 마녀가 카드를 읽고 있어요...</div>';
  
  // 로컬에서 해석 생성 (API 불필요)
  setTimeout(() => {
    const interpretation = createLocalInterpretation(cards);
    interpretationText.textContent = interpretation;
  }, 1500); // 실제감을 위한 약간의 딜레이
}

function createLocalInterpretation(cards) {
  // 카드에서 핵심 키워드 추출
  const extractKeyword = (cardMain) => {
    const keywords = cardMain.split('.')[0].split(',')[0];
    return keywords.replace('심해의 마녀, 뮤너가 전해드립니다. 구슬은 ', '')
                   .replace('구슬은 ', '')
                   .replace('을 노래해요', '')
                   .replace('을 비춥니다', '')
                   .trim();
  };
  
  // 시작 문구 (랜덤)
  const openings = [
    '심해의 마녀, 뮤너가 전해드립니다.',
    '구슬이 오늘의 이야기를 들려주네요.',
    '심해 깊은 곳에서 당신의 하루를 봅니다.'
  ];
  
  // 흐름 연결 표현 (랜덤)
  const flowConnectors = [
    `${cards[0].title}에서 ${cards[1].title}로, 그리고 ${cards[2].title}로 이어지는 길`,
    `${cards[0].title}가 만든 흐름 속에서 ${cards[1].title}를 지나 ${cards[2].title}로 향하는 여정`,
    `${cards[0].title}의 기억과 ${cards[1].title}의 현재, ${cards[2].title}의 가능성`
  ];
  
  // 과거 해석 표현
  const pastPhrases = [
    `과거의 ${cards[0].title}가 만든 흐름 속에서`,
    `지나온 ${cards[0].title}의 시간이 당신을 여기까지 데려왔어요`,
    `${cards[0].title}로 시작된 이야기는`
  ];
  
  // 현재 해석 표현
  const presentPhrases = [
    `지금 당신은 ${cards[1].title}의 순간을 지나고 있어요`,
    `현재 ${cards[1].title}의 에너지가 당신을 감싸고 있습니다`,
    `이제 ${cards[1].title}의 순간이에요`
  ];
  
  // 미래 해석 표현
  const futurePhrases = [
    `앞으로 펼쳐질 ${cards[2].title}는 이미 당신의 선택 안에 있습니다`,
    `${cards[2].title}로 향하는 길이 보여요`,
    `다가올 ${cards[2].title}는 당신이 만들어가는 것`
  ];
  
  // 조언 표현 (카드 조합에 따라)
  const adviceOptions = [
    '오늘 하루, 있는 그대로의 흐름을 믿어보세요.',
    '지금 이 순간에 집중하세요. 과거는 교훈이고 미래는 가능성이에요.',
    '당신의 선택을 믿으세요. 길은 이미 열려 있어요.',
    '조급해하지 마세요. 모든 것은 때가 되면 제자리를 찾아가요.',
    '내면의 목소리에 귀 기울여보세요. 답은 이미 당신 안에 있어요.'
  ];
  
  // 마무리 표현
  const closings = [
    '구슬은 당신의 내면이 이미 답을 알고 있다고 속삭입니다.',
    '심해의 깊은 곳에서 뮤너가 응원할게요.',
    '오늘 하루도 당신의 빛을 믿으세요.',
    '당신의 여정을 뮤너가 지켜보고 있어요.'
  ];
  
  // 랜덤 선택 함수
  const random = (arr) => arr[Math.floor(Math.random() * arr.length)];
  
  // 특별한 조합 해석 (선택적)
  const specialInterpretation = getSpecialInterpretation(cards);
  if (specialInterpretation) {
    return `${random(openings)}\n\n${specialInterpretation}\n\n${random(closings)} ✨`;
  }
  
  // 일반 해석 생성
  const interpretation = `${random(openings)}

구슬이 비추는 오늘의 흐름을 보니, ${random(flowConnectors)}이 보이네요.

${random(pastPhrases)}, ${random(presentPhrases)}. ${random(futurePhrases)}.

${random(adviceOptions)}

${random(closings)} ✨`;
  
  return interpretation;
}

function getSpecialInterpretation(cards) {
  const titles = cards.map(c => c.title);
  
  // 긍정적 조합 (태양, 별, 꽃다발 등)
  const positiveCards = ['태양', '별', '꽃다발', '선물', '빛', '무지개', '웃음'];
  const positiveCount = titles.filter(t => positiveCards.includes(t)).length;
  
  if (positiveCount >= 2) {
    return `오늘은 특별히 밝은 에너지가 느껴지네요. ${titles[0]}, ${titles[1]}, ${titles[2]}... 이 세 카드의 조합은 긍정적인 흐름을 말해줍니다.

과거의 ${titles[0]}가 만든 기반 위에서, 지금의 ${titles[1]}가 당신을 더 나은 곳으로 이끌고 있어요. 그리고 ${titles[2]}는 당신이 기대해도 좋을 미래를 약속합니다.

오늘 하루, 마음을 열고 좋은 것들을 받아들이세요. 당신은 충분히 받을 자격이 있어요.`;
  }
  
  // 도전적 조합 (탑, 배신, 추락 등)
  const challengingCards = ['탑', '배신', '추락', '칼', '뱀', '그림자', '벽'];
  const challengeCount = titles.filter(t => challengingCards.includes(t)).length;
  
  if (challengeCount >= 2) {
    return `구슬이 보여주는 길이 쉽지만은 않네요. ${titles[0]}, ${titles[1]}, ${titles[2]}... 이 조합은 지금 당신이 중요한 전환점에 있다는 걸 말해줍니다.

${titles[0]}의 시간을 지나 ${titles[1]}의 순간에 서 있는 지금, 아프고 힘들 수 있어요. 하지만 ${titles[2]}로 향하는 이 과정은 당신을 더 강하게 만들 거예요.

어려움 속에서도 자신을 믿으세요. 바닥을 찍어야 다시 오를 수 있는 법이에요. 뮤너가 함께 있어요.`;
  }
  
  // 변화의 조합 (다리, 길, 문, 항해 등)
  const changeCards = ['다리', '길', '문', '항해', '새', '배', '날개'];
  const changeCount = titles.filter(t => changeCards.includes(t)).length;
  
  if (changeCount >= 2) {
    return `움직임과 변화의 에너지가 강하게 느껴지네요. ${titles[0]}, ${titles[1]}, ${titles[2]}... 이 카드들은 모두 전환을 이야기합니다.

${titles[0]}가 시작을 알렸다면, ${titles[1]}는 지금 그 변화의 한가운데에 있음을 보여줍니다. 그리고 ${titles[2]}는 새로운 곳으로 향하는 길을 열어줄 거예요.

변화를 두려워하지 마세요. 익숙한 곳을 떠나는 건 무섭지만, 그곳에 진짜 당신이 기다리고 있어요.`;
  }
  
  // 내면의 조합 (거울, 우물, 심장 등)
  const innerCards = ['거울', '우물', '심장', '뿌리', '가면', '그림자', '빛'];
  const innerCount = titles.filter(t => innerCards.includes(t)).length;
  
  if (innerCount >= 2) {
    return `오늘은 내면을 들여다보는 날이에요. ${titles[0]}, ${titles[1]}, ${titles[2]}... 이 카드들은 모두 자신과의 대화를 권합니다.

${titles[0]}가 보여준 것을 ${titles[1]}에서 깊이 느끼고, ${titles[2]}로 이어지는 이 여정은 결국 자기 자신을 알아가는 과정이에요.

밖을 보기보다 안을 들여다보세요. 당신이 찾는 답은 언제나 당신 안에 있어요.`;
  }
  
  return null; // 특별한 조합이 아니면 일반 해석 사용
}


</script>

</body>
</html>
